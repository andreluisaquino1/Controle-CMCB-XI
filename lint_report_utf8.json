[{"filePath":"D:\\Projetos\\CMCB-XI\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ActionCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\BuildVersion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\DemoModeBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\NavLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\PageLoader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\AccountDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\AjustarSaldoDialog.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'state.valor'. Either include it or remove the dependency array. If 'setFinalBalance' needs the current value of 'state.valor', you can also switch to useReducer instead of useState and read 'state.valor' in the reducer.","line":80,"column":8,"nodeType":"ArrayExpression","endLine":80,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [state.accountId, currentBalance, state.valor]","fix":{"range":[2459,2492],"text":"[state.accountId, currentBalance, state.valor]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentBalance' and 'setters'. Either include them or remove the dependency array.","line":87,"column":8,"nodeType":"ArrayExpression","endLine":87,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [currentBalance, setters, state.accountId]","fix":{"range":[2679,2696],"text":"[currentBalance, setters, state.accountId]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n    AlertDialogTrigger,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { CurrencyInput } from \"@/components/forms/CurrencyInput\";\r\nimport { DateInput } from \"@/components/forms/DateInput\";\r\nimport { cleanAccountDisplayName } from \"@/lib/account-display\";\r\nimport { sortByAccountOrder } from \"@/lib/constants\";\r\nimport { formatCurrencyBRL } from \"@/lib/currency\";\r\nimport { Account } from \"@/types\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\ninterface AjustarSaldoDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    state: {\r\n        date: string;\r\n        accountId: string;\r\n        valor: number;\r\n        motivo: string;\r\n        obs: string;\r\n    };\r\n    setters: {\r\n        setDate: (v: string) => void;\r\n        setAccountId: (v: string) => void;\r\n        setValor: (v: number) => void;\r\n        setMotivo: (v: string) => void;\r\n        setObs: (v: string) => void;\r\n    };\r\n    accounts: Account[];\r\n    onSubmit: () => Promise<boolean>;\r\n    isLoading: boolean;\r\n}\r\n\r\nexport function AjustarSaldoDialog({\r\n    open,\r\n    onOpenChange,\r\n    state,\r\n    setters,\r\n    accounts,\r\n    onSubmit,\r\n    isLoading,\r\n}: AjustarSaldoDialogProps) {\r\n    const selectedAccount = accounts.find(a => a.id === state.accountId);\r\n    const currentBalance = selectedAccount?.balance || 0;\r\n    const [confirmOpen, setConfirmOpen] = useState(false);\r\n\r\n    // Local state for the \"Final Balance\" input to allow interactive calculation\r\n    const [finalBalance, setFinalBalance] = useState(currentBalance + state.valor);\r\n\r\n    // Track which field is being edited: 'adjustment' | 'finalBalance' | null\r\n    const [activeField, setActiveField] = useState<'adjustment' | 'finalBalance' | null>(null);\r\n\r\n    // Update finalBalance when account changes\r\n    useEffect(() => {\r\n        setFinalBalance(currentBalance + state.valor);\r\n    }, [state.accountId, currentBalance]);\r\n\r\n    // Reset active field when account changes\r\n    useEffect(() => {\r\n        setActiveField(null);\r\n        setters.setValor(0);\r\n        setFinalBalance(currentBalance);\r\n    }, [state.accountId]);\r\n\r\n    const handleAdjustmentChange = (val: number) => {\r\n        if (val === 0) {\r\n            // Auto-clear when value is zeroed\r\n            setActiveField(null);\r\n            setters.setValor(0);\r\n            setFinalBalance(currentBalance);\r\n        } else {\r\n            setActiveField('adjustment');\r\n            setters.setValor(val);\r\n            setFinalBalance(currentBalance + val);\r\n        }\r\n    };\r\n\r\n    const handleFinalBalanceChange = (val: number) => {\r\n        if (val === currentBalance) {\r\n            // Auto-clear when final balance equals current balance (adjustment = 0)\r\n            setActiveField(null);\r\n            setters.setValor(0);\r\n            setFinalBalance(currentBalance);\r\n        } else {\r\n            setActiveField('finalBalance');\r\n            setFinalBalance(val);\r\n            setters.setValor(val - currentBalance);\r\n        }\r\n    };\r\n\r\n    const handleClearFields = () => {\r\n        setActiveField(null);\r\n        setters.setValor(0);\r\n        setFinalBalance(currentBalance);\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent\r\n                className=\"max-w-md w-[95vw]\"\r\n                onOpenAutoFocus={(e) => e.preventDefault()}\r\n            >\r\n                <DialogHeader>\r\n                    <DialogTitle>Ajustar Saldo da Conta</DialogTitle>\r\n                </DialogHeader>\r\n                <div className=\"space-y-4 pt-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label>Data *</Label>\r\n                        <DateInput value={state.date} onChange={setters.setDate} />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label>Conta a Ajustar *</Label>\r\n                        <Select value={state.accountId} onValueChange={setters.setAccountId}>\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"Selecione a conta\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                {sortByAccountOrder(accounts).map((acc) => (\r\n                                    <SelectItem key={acc.id} value={acc.id}>\r\n                                        {cleanAccountDisplayName(acc.name)}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                        {selectedAccount && (\r\n                            <p className=\"text-xs text-muted-foreground px-1\">\r\n                                Saldo Atual: <span className=\"font-semibold\">{formatCurrencyBRL(currentBalance)}</span>\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <Label className=\"text-sm font-medium\">Valores</Label>\r\n                            {activeField && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleClearFields}\r\n                                    className=\"text-xs text-muted-foreground hover:text-foreground underline\"\r\n                                >\r\n                                    Limpar\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label className=\"text-xs text-muted-foreground\">Valor do Ajuste (R$)</Label>\r\n                                <CurrencyInput\r\n                                    value={state.valor}\r\n                                    onChange={handleAdjustmentChange}\r\n                                    placeholder=\"Ex: +10 ou -5\"\r\n                                    disabled={activeField === 'finalBalance'}\r\n                                />\r\n                                <p className=\"text-[10px] text-muted-foreground leading-tight\">\r\n                                    {activeField === 'finalBalance' ? 'Calculado automaticamente' : 'Quanto somar ou subtrair'}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label className=\"text-xs text-muted-foreground\">Novo Saldo (R$)</Label>\r\n                                <CurrencyInput\r\n                                    value={finalBalance}\r\n                                    onChange={handleFinalBalanceChange}\r\n                                    placeholder=\"Saldo final desejado\"\r\n                                    disabled={activeField === 'adjustment'}\r\n                                />\r\n                                <p className=\"text-[10px] text-muted-foreground leading-tight\">\r\n                                    {activeField === 'adjustment' ? 'Calculado automaticamente' : 'Qual deve ser o saldo final'}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label>Motivo *</Label>\r\n                        <Input\r\n                            value={state.motivo}\r\n                            onChange={(e) => setters.setMotivo(e.target.value)}\r\n                            placeholder=\"Ex: Saldo inicial, corre├º├úo, etc\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label>Observa├º├úo</Label>\r\n                        <Input\r\n                            value={state.obs}\r\n                            onChange={(e) => setters.setObs(e.target.value)}\r\n                            placeholder=\"Informa├º├Áes adicionais\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"bg-amber-50 border border-amber-200 p-3 rounded-md\">\r\n                        <p className=\"text-xs text-amber-800\">\r\n                            <strong>Aten├º├úo:</strong> Ajustes de saldo s├úo lan├ºados como transa├º├Áes de corre├º├úo e afetam o saldo imediatamente.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <AlertDialog open={confirmOpen} onOpenChange={setConfirmOpen}>\r\n                        <AlertDialogTrigger asChild>\r\n                            <Button\r\n                                className=\"w-full\"\r\n                                disabled={isLoading || !state.accountId || !state.motivo || state.motivo.length < 5}\r\n                            >\r\n                                {isLoading ? \"Salvando...\" : \"Registrar Ajuste\"}\r\n                            </Button>\r\n                        </AlertDialogTrigger>\r\n                        <AlertDialogContent className=\"w-[95vw] max-w-md\">\r\n                            <AlertDialogHeader>\r\n                                <AlertDialogTitle>Confirmar Ajuste de Saldo?</AlertDialogTitle>\r\n                                <AlertDialogDescription>\r\n                                    Esta a├º├úo alterar├í o saldo de <strong>{selectedAccount ? cleanAccountDisplayName(selectedAccount.name) : \"\"}</strong> de {formatCurrencyBRL(currentBalance)} para <strong>{formatCurrencyBRL(finalBalance)}</strong>.\r\n                                    Esta opera├º├úo ser├í registrada na trilha de auditoria.\r\n                                </AlertDialogDescription>\r\n                            </AlertDialogHeader>\r\n                            <AlertDialogFooter>\r\n                                <AlertDialogCancel>Cancelar</AlertDialogCancel>\r\n                                <AlertDialogAction\r\n                                    onClick={async () => {\r\n                                        const success = await onSubmit();\r\n                                        if (success) onOpenChange(false);\r\n                                    }}\r\n                                    className=\"bg-warning text-warning-foreground hover:bg-warning/90\"\r\n                                >\r\n                                    Confirmar Ajuste\r\n                                </AlertDialogAction>\r\n                            </AlertDialogFooter>\r\n                        </AlertDialogContent>\r\n                    </AlertDialog>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\AporteSaldoDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\ConsumoSaldoDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\CurrencyInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\DateInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\EntradaRecursoDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\GastoAssociacaoDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\GastoRecursoDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\MensalidadeDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\MovimentarSaldoDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\PixFeeBatchDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1859,1862],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1859,1862],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { CurrencyInput } from \"@/components/forms/CurrencyInput\";\r\nimport { DateInput } from \"@/components/forms/DateInput\";\r\nimport { useCreatePixFeeBatch, PixFeeItem } from \"@/hooks/use-pix-batch\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { Plus, Trash2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { format } from \"date-fns\";\r\n\r\ninterface PixFeeBatchDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n}\r\n\r\ninterface BatchItemState extends PixFeeItem {\r\n    id: string; // Temp ID for UI key\r\n}\r\n\r\nexport function PixFeeBatchDialog({ open, onOpenChange }: PixFeeBatchDialogProps) {\r\n    const { user } = useAuth();\r\n    const createBatch = useCreatePixFeeBatch();\r\n\r\n    // Form State\r\n    const [reference, setReference] = useState(\"\");\r\n    const [batchDate, setBatchDate] = useState(format(new Date(), \"yyyy-MM-dd\"));\r\n    const [items, setItems] = useState<BatchItemState[]>([\r\n        { id: crypto.randomUUID(), amount: 0, description: \"Taxa PIX\", occurred_at: \"\" }\r\n    ]);\r\n\r\n    const handleAddItem = () => {\r\n        setItems([\r\n            ...items,\r\n            { id: crypto.randomUUID(), amount: 0, description: \"Taxa PIX\", occurred_at: \"\" }\r\n        ]);\r\n    };\r\n\r\n    const handleRemoveItem = (id: string) => {\r\n        if (items.length === 1) {\r\n            toast.error(\"O lote deve ter pelo menos um item.\");\r\n            return;\r\n        }\r\n        setItems(items.filter(item => item.id !== id));\r\n    };\r\n\r\n    const updateItem = (id: string, field: keyof BatchItemState, value: any) => {\r\n        setItems(items.map(item => item.id === id ? { ...item, [field]: value } : item));\r\n    };\r\n\r\n    const calculateTotal = () => items.reduce((acc, item) => acc + item.amount, 0);\r\n\r\n    const handleSubmit = async () => {\r\n        if (!user?.user_metadata?.entity_id) {\r\n            toast.error(\"Entidade n├úo selecionada.\");\r\n            return;\r\n        }\r\n\r\n        const validItems = items.filter(i => i.amount > 0);\r\n        if (validItems.length === 0) {\r\n            toast.error(\"Adicione pelo menos um item com valor maior que zero.\");\r\n            return;\r\n        }\r\n\r\n        if (!reference) {\r\n            toast.error(\"Informe uma refer├¬ncia para o lote.\");\r\n            return;\r\n        }\r\n\r\n        createBatch.mutate({\r\n            entityId: user.user_metadata.entity_id,\r\n            payload: {\r\n                reference,\r\n                occurred_at: batchDate,\r\n                items: validItems.map(({ amount, description, occurred_at }) => ({\r\n                    amount,\r\n                    description,\r\n                    occurred_at: occurred_at || undefined\r\n                }))\r\n            }\r\n        }, {\r\n            onSuccess: () => {\r\n                onOpenChange(false);\r\n                setItems([{ id: crypto.randomUUID(), amount: 0, description: \"Taxa PIX\", occurred_at: \"\" }]);\r\n                setReference(\"\");\r\n            }\r\n        });\r\n    };\r\n\r\n    const total = calculateTotal();\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-h-[90vh] overflow-y-auto max-w-2xl\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Lan├ºamento de Taxas PIX</DialogTitle>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-6 pt-4\">\r\n                    {/* Header Fields */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label>Refer├¬ncia do Lote *</Label>\r\n                        <Input\r\n                            placeholder=\"Ex: Semana 1 - Mar├ºo\"\r\n                            value={reference}\r\n                            onChange={(e) => setReference(e.target.value)}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Items List */}\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"flex justify-between items-center\">\r\n                            <Label className=\"text-base font-medium\">Itens ({items.length})</Label>\r\n                            <Button variant=\"outline\" size=\"sm\" onClick={handleAddItem}>\r\n                                <Plus className=\"w-4 h-4 mr-2\" /> Adicionar Item\r\n                            </Button>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3 max-h-[40vh] overflow-y-auto pr-2\">\r\n                            {items.map((item, index) => (\r\n                                <div key={item.id} className=\"grid grid-cols-12 gap-2 items-end p-3 border rounded-lg bg-slate-50\">\r\n                                    <div className=\"col-span-1 flex items-center justify-center h-10 font-bold text-slate-400\">\r\n                                        #{index + 1}\r\n                                    </div>\r\n                                    <div className=\"col-span-3 space-y-1\">\r\n                                        <Label className=\"text-xs\">Valor</Label>\r\n                                        <CurrencyInput\r\n                                            value={item.amount}\r\n                                            onChange={(v) => updateItem(item.id, 'amount', v)}\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"col-span-4 space-y-1\">\r\n                                        <Label className=\"text-xs\">Descri├º├úo</Label>\r\n                                        <Input\r\n                                            value={item.description}\r\n                                            onChange={(e) => updateItem(item.id, 'description', e.target.value)}\r\n                                            placeholder=\"Taxa PIX\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"col-span-3 space-y-1\">\r\n                                        <Label className=\"text-xs\">Data (Opcional)</Label>\r\n                                        <DateInput\r\n                                            value={item.occurred_at || \"\"}\r\n                                            onChange={(v) => updateItem(item.id, 'occurred_at', v)}\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"col-span-1\">\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"text-red-500 hover:text-red-700 hover:bg-red-50\"\r\n                                            onClick={() => handleRemoveItem(item.id)}\r\n                                        >\r\n                                            <Trash2 className=\"w-4 h-4\" />\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Footer Summary */}\r\n                    <div className=\"flex justify-between items-center pt-4 border-t\">\r\n                        <div className=\"text-lg font-bold\">\r\n                            Total: <span className=\"text-red-600\">{new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(total)}</span>\r\n                        </div>\r\n                        <Button\r\n                            onClick={handleSubmit}\r\n                            disabled={createBatch.isPending || total <= 0}\r\n                            className=\"w-1/3\"\r\n                        >\r\n                            {createBatch.isPending ? \"Processando...\" : \"Lan├ºar Lote\"}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\forms\\PixNaoIdentificadoDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\transactions\\TransactionItemsDialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\transactions\\TransactionTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":29,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":29,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\n}\n\nexport { Badge, badgeVariants };\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":47,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":47,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\n  },\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":129,"column":10,"nodeType":"Identifier","messageId":"namedExport","endLine":129,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from \"react-hook-form\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Label } from \"@/components/ui/label\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n};\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext);\n  const itemContext = React.useContext(FormItemContext);\n  const { getFieldState, formState } = useFormContext();\n\n  const fieldState = getFieldState(fieldContext.name, formState);\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\");\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  };\n};\n\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);\n\nconst FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => {\n    const id = React.useId();\n\n    return (\n      <FormItemContext.Provider value={{ id }}>\n        <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n      </FormItemContext.Provider>\n    );\n  },\n);\nFormItem.displayName = \"FormItem\";\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField();\n\n  return <Label ref={ref} className={cn(error && \"text-destructive\", className)} htmlFor={formItemId} {...props} />;\n});\nFormLabel.displayName = \"FormLabel\";\n\nconst FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(\n  ({ ...props }, ref) => {\n    const { error, formItemId, formDescriptionId, formMessageId } = useFormField();\n\n    return (\n      <Slot\n        ref={ref}\n        id={formItemId}\n        aria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}\n        aria-invalid={!!error}\n        {...props}\n      />\n    );\n  },\n);\nFormControl.displayName = \"FormControl\";\n\nconst FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, ...props }, ref) => {\n    const { formDescriptionId } = useFormField();\n\n    return <p ref={ref} id={formDescriptionId} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />;\n  },\n);\nFormDescription.displayName = \"FormDescription\";\n\nconst FormMessage = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, children, ...props }, ref) => {\n    const { error, formMessageId } = useFormField();\n    const body = error ? String(error?.message) : children;\n\n    if (!body) {\n      return null;\n    }\n\n    return (\n      <p ref={ref} id={formMessageId} className={cn(\"text-sm font-medium text-destructive\", className)} {...props}>\n        {body}\n      </p>\n    );\n  },\n);\nFormMessage.displayName = \"FormMessage\";\n\nexport { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":111,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":111,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\";\nimport { cva } from \"class-variance-authority\";\nimport { ChevronDown } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\"relative z-10 flex max-w-max flex-1 items-center justify-center\", className)}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n));\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName;\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\"group flex flex-1 list-none items-center justify-center space-x-1\", className)}\n    {...props}\n  />\n));\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName;\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item;\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\",\n);\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n));\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName;\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto\",\n      className,\n    )}\n    {...props}\n  />\n));\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName;\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link;\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className,\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n));\nNavigationMenuViewport.displayName = NavigationMenuPrimitive.Viewport.displayName;\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className,\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n));\nNavigationMenuIndicator.displayName = NavigationMenuPrimitive.Indicator.displayName;\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n};\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":636,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":636,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { VariantProps, cva } from \"class-variance-authority\";\nimport { PanelLeft } from \"lucide-react\";\n\nimport { useIsMobile } from \"@/hooks/use-mobile\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\";\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\nconst SIDEBAR_WIDTH = \"16rem\";\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\";\nconst SIDEBAR_WIDTH_ICON = \"3rem\";\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\";\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\";\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  openMobile: boolean;\n  setOpenMobile: (open: boolean) => void;\n  isMobile: boolean;\n  toggleSidebar: () => void;\n};\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null);\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext);\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\n  }\n\n  return context;\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n  }\n>(({ defaultOpen = true, open: openProp, onOpenChange: setOpenProp, className, style, children, ...props }, ref) => {\n  const isMobile = useIsMobile();\n  const [openMobile, setOpenMobile] = React.useState(false);\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen);\n  const open = openProp ?? _open;\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value;\n      if (setOpenProp) {\n        setOpenProp(openState);\n      } else {\n        _setOpen(openState);\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;\n    },\n    [setOpenProp, open],\n  );\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);\n  }, [isMobile, setOpen, setOpenMobile]);\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {\n        event.preventDefault();\n        toggleSidebar();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [toggleSidebar]);\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\";\n\n  const contextValue = React.useMemo<SidebarContext>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],\n  );\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\", className)}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  );\n});\nSidebarProvider.displayName = \"SidebarProvider\";\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\";\n    variant?: \"sidebar\" | \"floating\" | \"inset\";\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\";\n  }\n>(({ side = \"left\", variant = \"sidebar\", collapsible = \"offcanvas\", className, children, ...props }, ref) => {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        className={cn(\"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\", className)}\n        ref={ref}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    );\n  }\n\n  return (\n    <div\n      ref={ref}\n      className=\"group peer hidden text-sidebar-foreground md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        className={cn(\n          \"relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\",\n        )}\n      />\n      <div\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className,\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n});\nSidebar.displayName = \"Sidebar\";\n\nconst SidebarTrigger = React.forwardRef<React.ElementRef<typeof Button>, React.ComponentProps<typeof Button>>(\n  ({ className, onClick, ...props }, ref) => {\n    const { toggleSidebar } = useSidebar();\n\n    return (\n      <Button\n        ref={ref}\n        data-sidebar=\"trigger\"\n        variant=\"ghost\"\n        size=\"icon\"\n        className={cn(\"h-7 w-7\", className)}\n        onClick={(event) => {\n          onClick?.(event);\n          toggleSidebar();\n        }}\n        {...props}\n      >\n        <PanelLeft />\n        <span className=\"sr-only\">Toggle Sidebar</span>\n      </Button>\n    );\n  },\n);\nSidebarTrigger.displayName = \"SidebarTrigger\";\n\nconst SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\">>(\n  ({ className, ...props }, ref) => {\n    const { toggleSidebar } = useSidebar();\n\n    return (\n      <button\n        ref={ref}\n        data-sidebar=\"rail\"\n        aria-label=\"Toggle Sidebar\"\n        tabIndex={-1}\n        onClick={toggleSidebar}\n        title=\"Toggle Sidebar\"\n        className={cn(\n          \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex\",\n          \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n          \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n          \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n          \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n          \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarRail.displayName = \"SidebarRail\";\n\nconst SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<\"main\">>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarInset.displayName = \"SidebarInset\";\n\nconst SidebarInput = React.forwardRef<React.ElementRef<typeof Input>, React.ComponentProps<typeof Input>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <Input\n        ref={ref}\n        data-sidebar=\"input\"\n        className={cn(\n          \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarInput.displayName = \"SidebarInput\";\n\nconst SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return <div ref={ref} data-sidebar=\"header\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\n});\nSidebarHeader.displayName = \"SidebarHeader\";\n\nconst SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return <div ref={ref} data-sidebar=\"footer\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\n});\nSidebarFooter.displayName = \"SidebarFooter\";\n\nconst SidebarSeparator = React.forwardRef<React.ElementRef<typeof Separator>, React.ComponentProps<typeof Separator>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <Separator\n        ref={ref}\n        data-sidebar=\"separator\"\n        className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n        {...props}\n      />\n    );\n  },\n);\nSidebarSeparator.displayName = \"SidebarSeparator\";\n\nconst SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarContent.displayName = \"SidebarContent\";\n\nconst SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  );\n});\nSidebarGroup.displayName = \"SidebarGroup\";\n\nconst SidebarGroupLabel = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\"> & { asChild?: boolean }>(\n  ({ className, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"div\";\n\n    return (\n      <Comp\n        ref={ref}\n        data-sidebar=\"group-label\"\n        className={cn(\n          \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n          \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\";\n\nconst SidebarGroupAction = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\"> & { asChild?: boolean }>(\n  ({ className, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n\n    return (\n      <Comp\n        ref={ref}\n        data-sidebar=\"group-action\"\n        className={cn(\n          \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n          // Increases the hit area of the button on mobile.\n          \"after:absolute after:-inset-2 after:md:hidden\",\n          \"group-data-[collapsible=icon]:hidden\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarGroupAction.displayName = \"SidebarGroupAction\";\n\nconst SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} data-sidebar=\"group-content\" className={cn(\"w-full text-sm\", className)} {...props} />\n  ),\n);\nSidebarGroupContent.displayName = \"SidebarGroupContent\";\n\nconst SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(({ className, ...props }, ref) => (\n  <ul ref={ref} data-sidebar=\"menu\" className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)} {...props} />\n));\nSidebarMenu.displayName = \"SidebarMenu\";\n\nconst SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ className, ...props }, ref) => (\n  <li ref={ref} data-sidebar=\"menu-item\" className={cn(\"group/menu-item relative\", className)} {...props} />\n));\nSidebarMenuItem.displayName = \"SidebarMenuItem\";\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean;\n    isActive?: boolean;\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>;\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(({ asChild = false, isActive = false, variant = \"default\", size = \"default\", tooltip, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\";\n  const { isMobile, state } = useSidebar();\n\n  const button = (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  );\n\n  if (!tooltip) {\n    return button;\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    };\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent side=\"right\" align=\"center\" hidden={state !== \"collapsed\" || isMobile} {...tooltip} />\n    </Tooltip>\n  );\n});\nSidebarMenuButton.displayName = \"SidebarMenuButton\";\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean;\n    showOnHover?: boolean;\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuAction.displayName = \"SidebarMenuAction\";\n\nconst SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\";\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean;\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`;\n  }, []);\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && <Skeleton className=\"size-4 rounded-md\" data-sidebar=\"menu-skeleton-icon\" />}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  );\n});\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\";\n\nconst SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(\n  ({ className, ...props }, ref) => (\n    <ul\n      ref={ref}\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuSub.displayName = \"SidebarMenuSub\";\n\nconst SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ ...props }, ref) => (\n  <li ref={ref} {...props} />\n));\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\";\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean;\n    size?: \"sm\" | \"md\";\n    isActive?: boolean;\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\";\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n};\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\sonner.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":27,"column":19,"nodeType":"Identifier","messageId":"namedExport","endLine":27,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from \"next-themes\";\nimport { Toaster as Sonner, toast } from \"sonner\";\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>;\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme();\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton: \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton: \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  );\n};\n\nexport { Toaster, toast };\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":37,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":37,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3\",\n        sm: \"h-9 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root ref={ref} className={cn(toggleVariants({ variant, size, className }))} {...props} />\n));\n\nToggle.displayName = TogglePrimitive.Root.displayName;\n\nexport { Toggle, toggleVariants };\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":166,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":166,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { User, Session } from \"@supabase/supabase-js\";\nimport { supabase } from \"@/integrations/supabase/client\";\n\ninterface Profile {\n  id: string;\n  user_id: string;\n  name: string;\n  email: string;\n  active: boolean;\n  role?: \"admin\" | \"user\" | \"demo\";\n}\n\ninterface AuthContextType {\n  user: User | null;\n  session: Session | null;\n  profile: Profile | null;\n  isAdmin: boolean;\n  isDemo: boolean;\n  loading: boolean;\n  signIn: (email: string, password: string) => Promise<{ error: Error | null }>;\n  signUp: (email: string, password: string, name: string) => Promise<{ error: Error | null }>;\n  signOut: () => Promise<void>;\n  resetPassword: (email: string) => Promise<{ error: Error | null }>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [session, setSession] = useState<Session | null>(null);\n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  const fetchProfile = async (userId: string) => {\n    // Fetch profile\n    const { data: profileData, error: profileError } = await supabase\n      .from(\"profiles\")\n      .select(\"*\")\n      .eq(\"user_id\", userId)\n      .maybeSingle();\n\n    if (profileError) {\n      console.error(\"Error fetching profile:\", profileError);\n      return null;\n    }\n\n    if (!profileData) return null;\n\n    // Fetch role\n    const { data: roleData, error: roleError } = await supabase\n      .from(\"user_roles\")\n      .select(\"role\")\n      .eq(\"user_id\", userId)\n      .maybeSingle();\n\n    return {\n      ...profileData,\n      role: roleData?.role || \"user\"\n    } as Profile;\n  };\n\n  useEffect(() => {\n    // Set up auth state listener FIRST\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      (event, currentSession) => {\n        setSession(currentSession);\n        setUser(currentSession?.user ?? null);\n\n        if (event === \"PASSWORD_RECOVERY\") {\n          // Force redirect to reset password page when the event is detected\n          window.location.href = \"/auth/reset-password\";\n        }\n\n        // Defer profile fetch\n        if (currentSession?.user) {\n          setTimeout(() => {\n            fetchProfile(currentSession.user.id).then(setProfile);\n          }, 0);\n        } else {\n          setProfile(null);\n        }\n      }\n    );\n\n    // THEN check for existing session\n    supabase.auth.getSession().then(({ data: { session: existingSession } }) => {\n      setSession(existingSession);\n      setUser(existingSession?.user ?? null);\n\n      if (existingSession?.user) {\n        fetchProfile(existingSession.user.id).then((p) => {\n          setProfile(p);\n          setLoading(false);\n        });\n      } else {\n        setLoading(false);\n      }\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  const signIn = async (email: string, password: string) => {\n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n    return { error };\n  };\n\n  const signUp = async (email: string, password: string, name: string) => {\n    const origin = window.location.origin.includes(\"localhost\")\n      ? \"https://cmcb-xi.vercel.app\"\n      : window.location.origin;\n\n    const { error } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        emailRedirectTo: `${origin}/auth`,\n        data: { name },\n      },\n    });\n    return { error };\n  };\n\n  const signOut = async () => {\n    await supabase.auth.signOut();\n    setUser(null);\n    setSession(null);\n    setProfile(null);\n  };\n\n  const resetPassword = async (email: string) => {\n    const origin = window.location.origin.includes(\"localhost\")\n      ? \"https://cmcb-xi.vercel.app\"\n      : window.location.origin;\n\n    const { error } = await supabase.auth.resetPasswordForEmail(email, {\n      redirectTo: `${origin}/auth/reset-password`,\n    });\n    return { error };\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        session,\n        profile,\n        isAdmin: profile?.role === \"admin\",\n        isDemo: profile?.role === \"demo\",\n        loading,\n        signIn,\n        signUp,\n        signOut,\n        resetPassword,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\demo\\demoSeed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\demo\\demoStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":200,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8004,8007],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8004,8007],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { DemoAccount, DemoTransaction, DemoAuditLog, INITIAL_ACCOUNTS, INITIAL_MERCHANTS, INITIAL_TRANSACTIONS, MOCK_LOGS } from \"./demoSeed\";\r\n\r\nconst STORAGE_KEY = \"demo_state\";\r\nconst DEMO_schema_VERSION = \"1.7\"; // Increment this to force reset\r\n\r\ninterface DemoState {\r\n    version?: string;\r\n    accounts: DemoAccount[];\r\n    merchants: DemoAccount[];\r\n    transactions: DemoTransaction[];\r\n    logs: DemoAuditLog[];\r\n}\r\n\r\nconst getStoredState = (): DemoState | null => {\r\n    const stored = localStorage.getItem(STORAGE_KEY);\r\n    return stored ? JSON.parse(stored) : null;\r\n};\r\n\r\nconst setStoredState = (state: DemoState) => {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\r\n};\r\n\r\nexport const demoStore = {\r\n    init: () => {\r\n        const current = getStoredState();\r\n        if (!current || current.version !== DEMO_schema_VERSION) {\r\n            console.log(\"Fluxo Demo: Inicializando ou Resetando dados (Vers├úo alterada)\", {\r\n                currentVersion: current?.version,\r\n                newVersion: DEMO_schema_VERSION,\r\n                txCount: INITIAL_TRANSACTIONS.length\r\n            });\r\n            setStoredState({\r\n                version: DEMO_schema_VERSION,\r\n                accounts: INITIAL_ACCOUNTS,\r\n                merchants: INITIAL_MERCHANTS,\r\n                transactions: INITIAL_TRANSACTIONS,\r\n                logs: MOCK_LOGS,\r\n            });\r\n            // Force reload if we are resetting while app is running to ensure hooks get fresh data?\r\n            // Not strictly necessary if specific hooks call init(), but safer for global state.\r\n        }\r\n    },\r\n\r\n    reset: () => {\r\n        localStorage.removeItem(STORAGE_KEY);\r\n        demoStore.init();\r\n        window.location.reload();\r\n    },\r\n\r\n    getAccounts: (): DemoAccount[] => {\r\n        demoStore.init();\r\n        return getStoredState()?.accounts || [];\r\n    },\r\n\r\n    getMerchants: (): DemoAccount[] => {\r\n        demoStore.init();\r\n        return getStoredState()?.merchants || [];\r\n    },\r\n\r\n    getTransactions: (): DemoTransaction[] => {\r\n        demoStore.init();\r\n        return getStoredState()?.transactions || [];\r\n    },\r\n\r\n    getLogs: (): DemoAuditLog[] => {\r\n        demoStore.init();\r\n        return getStoredState()?.logs || [];\r\n    },\r\n\r\n    addTransaction: (transaction: DemoTransaction) => {\r\n        const state = getStoredState();\r\n        if (!state) return;\r\n\r\n        // Add transaction\r\n        state.transactions = [transaction, ...state.transactions];\r\n\r\n        // Update balances based on transaction type/module\r\n        const { amount, account_id, merchant_id, destination_account_id, source_account_id, type, module } = transaction;\r\n\r\n        const findAccount = (id: string) => state.accounts.find(a => a.id === id);\r\n        const findMerchant = (id: string) => state.merchants.find(m => m.id === id);\r\n\r\n        // Handle Transfer Logic (Explicit transfer module or direction)\r\n        // Note: useCreateTransaction usually sets direction='transfer' for transfers.\r\n        // But demo transaction might not have 'direction' property on interface?\r\n        // Let's check DemoTransaction interface in demoSeed.ts. \r\n        // It has: type: 'income' | 'expense'.\r\n        // We should probably add 'transfer' to DemoTransaction type or emulate it.\r\n        // If it's a transfer, we usually see Expense from Source and Income to Destination?\r\n        // Or we handle it based on module/properties.\r\n\r\n        // In our mock logic in useCreateTransaction, we mapped:\r\n        // type: transaction.direction === 'in' ? 'income' : 'expense'\r\n        // This is lossy for 'transfer'.\r\n        // But we assigned account_id = destination or source.\r\n\r\n        // Let's improve useCreateTransaction mock mapping first? \r\n        // No, let's look at what we have in demoStore.\r\n        // If module is 'transferencia_saldo' or 'deposito_cofre', etc.\r\n\r\n        // Actually, simpler:\r\n        // If account_id is present and type is 'income', add.\r\n        // If account_id is present and type is 'expense', subtract.\r\n\r\n        // BUT: Transfers involve TWO accounts.\r\n        // The current DemoTransaction interface only has ONE `account_id`.\r\n        // We need to support transfers. \r\n        // I should update DemoTransaction to support source/destination or handle as two transactions?\r\n        // Real Supabase `transactions` table has `source_account_id` and `destination_account_id`.\r\n        // My `DemoTransaction` should match that properly.\r\n\r\n        // CRITICAL FIX: Update DemoTransaction interface (in next step) and here.\r\n        // I will code assuming DemoTransaction HAS source/dest support.\r\n\r\n        if (module === 'transferencia_saldo' || module === 'deposito_cofre' || module === 'retirada_cofre' || module === 'aplicacao_poupanca' || module === 'resgate_poupanca') {\r\n            // Transfer logic\r\n            // We typically expect source & dest. \r\n            // If we only have account_id (from the mock mapping), we might be missing data.\r\n            // I will assume `source_account_id` and `destination_account_id` are passed in `transaction` object (I need to add them to interface).\r\n        }\r\n\r\n        // Standard Logic\r\n        if (source_account_id) {\r\n            const acc = findAccount(source_account_id);\r\n            if (acc) acc.balance -= amount;\r\n        }\r\n\r\n        if (destination_account_id) {\r\n            const acc = findAccount(destination_account_id);\r\n            if (acc) acc.balance += amount;\r\n        }\r\n\r\n        if (account_id && !source_account_id && !destination_account_id) {\r\n            const acc = findAccount(account_id);\r\n            if (acc) {\r\n                if (type === 'income') acc.balance += amount;\r\n                else acc.balance -= amount;\r\n            }\r\n        }\r\n\r\n        // Merchant Logic\r\n        if (merchant_id) {\r\n            const merc = findMerchant(merchant_id);\r\n            if (merc) {\r\n                // Basic logic: if we spent balance (module=consumo_saldo), reduce balance.\r\n                // If we added balance (aporte), increase.\r\n                // If we just spent money AT the merchant (expense), it doesn't affect 'merchant balance' unless it's a credit tab.\r\n                // But usually 'merchant balance' in this app implies a pre-paid credit or tab.\r\n\r\n                if (module === 'consumo_saldo') {\r\n                    // Expense from Merchant Balance\r\n                    merc.balance -= amount;\r\n                } else if (module === 'aporte_saldo' || module === 'aporte_estabelecimento_recurso') {\r\n                    // Credit to Merchant Balance\r\n                    merc.balance += amount;\r\n                }\r\n            }\r\n        }\r\n\r\n        setStoredState(state);\r\n    },\r\n\r\n    // Specific Helpers for Complex Logic\r\n    updateAccountBalance: (accountId: string, newBalance: number) => {\r\n        const state = getStoredState();\r\n        if (!state) return;\r\n\r\n        const acc = state.accounts.find(a => a.id === accountId);\r\n        if (acc) {\r\n            acc.balance = newBalance;\r\n            setStoredState(state);\r\n        }\r\n    },\r\n\r\n    updateMerchantBalance: (merchantId: string, delta: number) => {\r\n        const state = getStoredState();\r\n        if (!state) return;\r\n\r\n        const merc = state.merchants.find(m => m.id === merchantId);\r\n        if (merc) {\r\n            merc.balance += delta;\r\n            setStoredState(state);\r\n        }\r\n    },\r\n\r\n    getReportSummary: (startDate: string, endDate: string) => {\r\n        demoStore.init();\r\n        const transactions = getStoredState()?.transactions || [];\r\n        const start = new Date(startDate);\r\n        const end = new Date(endDate);\r\n        // End date should include the full day\r\n        end.setHours(23, 59, 59, 999);\r\n\r\n        const filtered = transactions.filter(t => {\r\n            const d = new Date(t.date);\r\n            return d >= start && d <= end;\r\n        });\r\n\r\n        // Helper to sum\r\n        const sum = (txs: any[]) => txs.reduce((acc, t) => acc + Number(t.amount), 0);\r\n\r\n        // Logic based on inference of how the real RPC works\r\n        // weeklyExpensesCash: Expenses from Especie\r\n        const expensesCash = filtered.filter(t => t.type === 'expense' && t.account_id === 'acc_especie');\r\n\r\n        // weeklyExpensesPix: Expenses from Pix\r\n        const expensesPix = filtered.filter(t => t.type === 'expense' && t.account_id === 'acc_pix');\r\n\r\n        // weeklyExpensesDigital: Expenses from Conta Digital\r\n        const expensesDigital = filtered.filter(t => t.type === 'expense' && (t.account_id === 'acc_digital' || t.account_id === 'acc_bb')); // acc_bb is old name? Using acc_digital based on Seed.\r\n\r\n        // weeklyEntriesCash: Income to Especie\r\n        const entriesCash = filtered.filter(t => t.type === 'income' && t.account_id === 'acc_especie');\r\n\r\n        // weeklyEntriesPix: Income to Pix\r\n        const entriesPix = filtered.filter(t => t.type === 'income' && t.account_id === 'acc_pix');\r\n\r\n        // weeklyDeposits: Transfers from Especie to Pix/Bank\r\n        // In our demo logic, transfers might be explicit modules\r\n        const deposits = filtered.filter(t => t.module === 'deposito_cofre' || (t.type === 'expense' && t.account_id === 'acc_especie' && t.destination_account_id === 'acc_pix')); // Simplified\r\n\r\n        // weeklyConsumption: Merchant consumption\r\n        const consumption = filtered.filter(t => t.module === 'consumo_saldo');\r\n\r\n        // weeklyDirectPix: Direct Pix payments? Maybe payments where payment_method='pix'?\r\n        // The mock RPC result has this field. In demo we might not track payment_method explicitly in DemoTransaction yet.\r\n        // We can approximate or leave 0.\r\n\r\n        return {\r\n            weeklyExpensesCash: sum(expensesCash),\r\n            weeklyExpensesPix: sum(expensesPix),\r\n            weeklyExpensesDigital: sum(expensesDigital),\r\n            weeklyEntriesCash: sum(entriesCash),\r\n            weeklyEntriesPix: sum(entriesPix),\r\n            weeklyDeposits: sum(deposits),\r\n            weeklyConsumption: sum(consumption),\r\n            weeklyDirectPix: 0\r\n        };\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\demo\\useDemoData.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'refresh'. Either include it or remove the dependency array.","line":40,"column":8,"nodeType":"ArrayExpression","endLine":40,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [isDemo, refresh]","fix":{"range":[1432,1440],"text":"[isDemo, refresh]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { useState, useEffect } from \"react\";\r\nimport { demoStore } from \"./demoStore\";\r\nimport { DemoAccount, DemoTransaction, DemoAuditLog } from \"./demoSeed\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\n\r\n// Event listener for storage changes to sync across tabs/components\r\n// Simple implementation: Custom Event\r\nconst DEMO_UPDATE_EVENT = \"demo_data_updated\";\r\n\r\nexport const triggerDemoUpdate = () => {\r\n    window.dispatchEvent(new Event(DEMO_UPDATE_EVENT));\r\n};\r\n\r\nexport function useDemoData() {\r\n    const { isDemo } = useAuth();\r\n    const [accounts, setAccounts] = useState<DemoAccount[]>([]);\r\n    const [merchants, setMerchants] = useState<DemoAccount[]>([]);\r\n    const [transactions, setTransactions] = useState<DemoTransaction[]>([]);\r\n    const [logs, setLogs] = useState<DemoAuditLog[]>([]);\r\n\r\n    const refresh = () => {\r\n        if (isDemo) {\r\n            setAccounts(demoStore.getAccounts());\r\n            setMerchants(demoStore.getMerchants());\r\n            setTransactions(demoStore.getTransactions());\r\n            setLogs(demoStore.getLogs());\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isDemo) {\r\n            demoStore.init();\r\n            refresh();\r\n\r\n            const handleUpdate = () => refresh();\r\n            window.addEventListener(DEMO_UPDATE_EVENT, handleUpdate);\r\n            return () => window.removeEventListener(DEMO_UPDATE_EVENT, handleUpdate);\r\n        }\r\n    }, [isDemo]);\r\n\r\n    return {\r\n        accounts,\r\n        merchants,\r\n        transactions,\r\n        logs,\r\n        // Expose direct getters for synchronous access (fixes initial render issues)\r\n        getAccounts: () => demoStore.getAccounts(),\r\n        getMerchants: () => demoStore.getMerchants(),\r\n        getTransactions: () => demoStore.getTransactions(),\r\n        getLogs: () => demoStore.getLogs(),\r\n        addTransaction: (tx: DemoTransaction) => {\r\n            demoStore.addTransaction(tx);\r\n            triggerDemoUpdate();\r\n        },\r\n        updateMerchantBalance: (id: string, delta: number) => {\r\n            demoStore.updateMerchantBalance(id, delta);\r\n            triggerDemoUpdate();\r\n        },\r\n        getReportSummary: (start: string, end: string) => demoStore.getReportSummary(start, end),\r\n        refresh\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-accounts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-associacao-actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":237,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":237,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10621,10624],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10621,10624],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":283,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":283,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12656,12659],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12656,12659],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useCallback, useMemo } from 'react';\r\nimport { Account, Entity } from '@/types';\r\nimport { useCreateTransaction } from '@/hooks/use-transactions';\r\nimport { toast } from \"sonner\";\r\nimport { formatCurrencyBRL } from '@/lib/currency';\r\nimport { ACCOUNT_NAMES } from '@/lib/constants';\r\nimport { getTodayString } from '@/lib/date-utils';\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Database } from \"@/integrations/supabase/types\";\r\nimport {\r\n    mensalidadeSchema,\r\n    gastoAssociacaoSchema,\r\n    movimentarSaldoSchema,\r\n    ajusteSchema\r\n} from \"@/lib/schemas\";\r\n\r\ninterface AssociacaoState {\r\n    mensalidade: {\r\n        date: string;\r\n        turno: string;\r\n        cash: number;\r\n        pix: number;\r\n        obs: string;\r\n    };\r\n    gasto: {\r\n        date: string;\r\n        meio: string;\r\n        obs: string;\r\n    };\r\n    mov: {\r\n        date: string;\r\n        de: string;\r\n        para: string;\r\n        valor: number;\r\n        taxa: number;\r\n        descricao: string;\r\n        obs: string;\r\n    };\r\n    ajuste: {\r\n        date: string;\r\n        accountId: string;\r\n        valor: number; // The difference to add/subtract\r\n        motivo: string;\r\n        obs: string;\r\n    };\r\n}\r\n\r\nexport function useAssociacaoActions(\r\n    accounts: Account[] | undefined,\r\n    associacaoEntity?: Entity,\r\n    onSuccess?: () => void\r\n) {\r\n    const createTransaction = useCreateTransaction();\r\n\r\n    const [state, setState] = useState<AssociacaoState>({\r\n        mensalidade: { date: getTodayString(), turno: \"\", cash: 0, pix: 0, obs: \"\" },\r\n        gasto: { date: getTodayString(), meio: \"cash\", obs: \"\" },\r\n        mov: { date: getTodayString(), de: \"\", para: \"\", valor: 0, taxa: 0, descricao: \"\", obs: \"\" },\r\n        ajuste: { date: getTodayString(), accountId: \"\", valor: 0, motivo: \"\", obs: \"\" },\r\n    });\r\n\r\n    const accountsMap = useMemo(() => {\r\n        const map = new Map<string, Account>();\r\n        accounts?.forEach(acc => map.set(acc.id, acc));\r\n        return map;\r\n    }, [accounts]);\r\n\r\n    const especieAccount = useMemo(() => accounts?.find(a => a.name === ACCOUNT_NAMES.ESPECIE), [accounts]);\r\n    const pixAccount = useMemo(() => accounts?.find(a => a.name === ACCOUNT_NAMES.PIX), [accounts]);\r\n    const cofreAccount = useMemo(() => accounts?.find(a => a.name === ACCOUNT_NAMES.COFRE), [accounts]);\r\n    const contaDigitalAccount = useMemo(() => accounts?.find(a => a.name === ACCOUNT_NAMES.CONTA_DIGITAL), [accounts]);\r\n\r\n    const setters = {\r\n        setMensalidadeDate: (date: string) => setState((s) => ({ ...s, mensalidade: { ...s.mensalidade, date } })),\r\n        setMensalidadeTurno: (turno: string) => setState((s) => ({ ...s, mensalidade: { ...s.mensalidade, turno } })),\r\n        setMensalidadeCash: (cash: number) => setState((s) => ({ ...s, mensalidade: { ...s.mensalidade, cash } })),\r\n        setMensalidadePix: (pix: number) => setState((s) => ({ ...s, mensalidade: { ...s.mensalidade, pix } })),\r\n        setMensalidadeObs: (obs: string) => setState((s) => ({ ...s, mensalidade: { ...s.mensalidade, obs } })),\r\n        setGastoDate: (date: string) => setState((s) => ({ ...s, gasto: { ...s.gasto, date } })),\r\n        setGastoMeio: (meio: string) => setState((s) => ({ ...s, gasto: { ...s.gasto, meio } })),\r\n        setGastoObs: (obs: string) => setState((s) => ({ ...s, gasto: { ...s.gasto, obs } })),\r\n        setMovDate: (date: string) => setState((s) => ({ ...s, mov: { ...s.mov, date } })),\r\n        setMovDe: (de: string) => setState((s) => ({ ...s, mov: { ...s.mov, de } })),\r\n        setMovPara: (para: string) => setState((s) => ({ ...s, mov: { ...s.mov, para } })),\r\n        setMovValor: (valor: number) => setState((s) => ({ ...s, mov: { ...s.mov, valor } })),\r\n        setMovTaxa: (taxa: number) => setState((s) => ({ ...s, mov: { ...s.mov, taxa } })),\r\n        setMovDescricao: (descricao: string) => setState((s) => ({ ...s, mov: { ...s.mov, descricao } })),\r\n        setMovObs: (obs: string) => setState((s) => ({ ...s, mov: { ...s.mov, obs } })),\r\n\r\n        // Unified Adjustment Setters\r\n        setAjusteDate: (date: string) => setState((s) => ({ ...s, ajuste: { ...s.ajuste, date } })),\r\n        setAjusteAccountId: (accountId: string) => setState((s) => ({ ...s, ajuste: { ...s.ajuste, accountId, valor: 0 } })),\r\n        setAjusteValor: (valor: number) => setState((s) => ({ ...s, ajuste: { ...s.ajuste, valor } })),\r\n        setAjusteMotivo: (motivo: string) => setState((s) => ({ ...s, ajuste: { ...s.ajuste, motivo } })),\r\n        setAjusteObs: (obs: string) => setState((s) => ({ ...s, ajuste: { ...s.ajuste, obs } })),\r\n    };\r\n\r\n    const resetMensalidade = useCallback(() => {\r\n        setState((s) => ({ ...s, mensalidade: { date: getTodayString(), turno: \"\", cash: 0, pix: 0, obs: \"\" } }));\r\n    }, []);\r\n\r\n    const resetGasto = useCallback(() => {\r\n        setState((s) => ({ ...s, gasto: { date: getTodayString(), meio: \"cash\", obs: \"\" } }));\r\n    }, []);\r\n\r\n    const resetMov = useCallback(() => {\r\n        setState((s) => ({ ...s, mov: { date: getTodayString(), de: \"\", para: \"\", valor: 0, taxa: 0, descricao: \"\", obs: \"\" } }));\r\n    }, []);\r\n\r\n    const resetAjuste = useCallback(() => {\r\n        setState((s) => ({ ...s, ajuste: { date: getTodayString(), accountId: \"\", valor: 0, motivo: \"\", obs: \"\" } }));\r\n    }, []);\r\n\r\n    const handleMensalidadeSubmit = async (): Promise<boolean> => {\r\n        const result = mensalidadeSchema.safeParse(state.mensalidade);\r\n        if (!result.success) {\r\n            toast.error(result.error.errors[0].message);\r\n            return false;\r\n        }\r\n\r\n        if (!especieAccount || !pixAccount || !associacaoEntity) {\r\n            toast.error(\"Contas ou entidade n├úo encontradas.\");\r\n            return false;\r\n        }\r\n\r\n        const { data: existing } = await supabase\r\n            .from(\"transactions\")\r\n            .select(\"module, payment_method\")\r\n            .in(\"module\", [\"mensalidade\", \"mensalidade_pix\"])\r\n            .eq(\"transaction_date\", state.mensalidade.date)\r\n            .eq(\"shift\", state.mensalidade.turno as \"matutino\" | \"vespertino\")\r\n            .eq(\"status\", \"posted\");\r\n\r\n        const hasCash = existing?.some(e => e.module === 'mensalidade' && e.payment_method === 'cash');\r\n        const hasPix = existing?.some(e => e.module === 'mensalidade_pix' || (e.module === 'mensalidade' && e.payment_method === 'pix'));\r\n\r\n        if (state.mensalidade.cash > 0 && hasCash) {\r\n            toast.error(`J├í existe um registro em ESP├ëCIE para o turno ${state.mensalidade.turno} nesta data.`);\r\n            return false;\r\n        }\r\n\r\n        if (state.mensalidade.pix > 0 && hasPix) {\r\n            toast.error(`J├í existe um registro em PIX para o turno ${state.mensalidade.turno} nesta data.`);\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            if (state.mensalidade.cash > 0) {\r\n                await createTransaction.mutateAsync({\r\n                    transaction: {\r\n                        transaction_date: state.mensalidade.date,\r\n                        module: \"mensalidade\",\r\n                        entity_id: associacaoEntity.id,\r\n                        destination_account_id: especieAccount.id,\r\n                        amount: state.mensalidade.cash,\r\n                        direction: \"in\",\r\n                        payment_method: \"cash\",\r\n                        shift: state.mensalidade.turno as \"matutino\" | \"vespertino\",\r\n                        description: `Mensalidade ${state.mensalidade.turno}`,\r\n                        notes: state.mensalidade.obs || null,\r\n                    },\r\n                });\r\n            }\r\n\r\n            if (state.mensalidade.pix > 0) {\r\n                await createTransaction.mutateAsync({\r\n                    transaction: {\r\n                        transaction_date: state.mensalidade.date,\r\n                        module: \"mensalidade_pix\",\r\n                        entity_id: associacaoEntity.id,\r\n                        destination_account_id: pixAccount.id,\r\n                        amount: state.mensalidade.pix,\r\n                        direction: \"in\",\r\n                        payment_method: \"pix\",\r\n                        shift: state.mensalidade.turno as \"matutino\" | \"vespertino\",\r\n                        description: `Mensalidade ${state.mensalidade.turno} (PIX)`,\r\n                        notes: state.mensalidade.obs || null,\r\n                    },\r\n                });\r\n            }\r\n\r\n            toast.success(\"Mensalidade registrada.\");\r\n            resetMensalidade();\r\n            if (onSuccess) onSuccess();\r\n            return true;\r\n        } catch (error) {\r\n            toast.error(\"Falha ao registrar mensalidade.\");\r\n            return false;\r\n        }\r\n    };\r\n\r\n\r\n    const handleMovimentarSubmit = async (): Promise<boolean> => {\r\n        const result = movimentarSaldoSchema.safeParse(state.mov);\r\n        if (!result.success) {\r\n            toast.error(result.error.errors[0].message);\r\n            return false;\r\n        }\r\n\r\n        if (!associacaoEntity) return false;\r\n\r\n        const sourceAccount = accounts?.find(a => a.id === state.mov.de);\r\n        const destAccount = accounts?.find(a => a.id === state.mov.para);\r\n        if (!sourceAccount || !destAccount) return false;\r\n\r\n        const totalAmount = state.mov.valor + state.mov.taxa;\r\n\r\n        if (totalAmount > sourceAccount.balance) {\r\n            toast.error(`Saldo insuficiente em ${sourceAccount.name}. Necess├írio ${formatCurrencyBRL(totalAmount)}.`);\r\n            return false;\r\n        }\r\n\r\n        // Phase 4: Rigid rules for Conta Digital\r\n        if (sourceAccount.name === ACCOUNT_NAMES.CONTA_DIGITAL) {\r\n            if (destAccount.name !== ACCOUNT_NAMES.PIX) {\r\n                toast.error(\"A Conta Digital s├│ pode movimentar para o PIX (Conta BB).\");\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // Permite taxas em qualquer movimenta├º├úo, padr├úo 0\r\n\r\n        try {\r\n            // 1. Transfer├¬ncia principal\r\n            const mainTx = await createTransaction.mutateAsync({\r\n                transaction: {\r\n                    transaction_date: state.mov.date,\r\n                    module: \"assoc_transfer\",\r\n                    entity_id: associacaoEntity.id,\r\n                    source_account_id: sourceAccount.id,\r\n                    destination_account_id: destAccount.id,\r\n                    amount: state.mov.valor,\r\n                    direction: \"transfer\",\r\n                    description: state.mov.descricao,\r\n                    notes: state.mov.obs || null,\r\n                },\r\n            }) as any;\r\n\r\n            // 2. Registro da taxa (se houver) - Phase 3: Link with parent_transaction_id\r\n            if (state.mov.taxa > 0 && mainTx?.id) {\r\n                await createTransaction.mutateAsync({\r\n                    transaction: {\r\n                        transaction_date: state.mov.date,\r\n                        module: \"conta_digital_taxa\",\r\n                        entity_id: associacaoEntity.id,\r\n                        source_account_id: sourceAccount.id,\r\n                        destination_account_id: null,\r\n                        amount: state.mov.taxa,\r\n                        direction: \"out\",\r\n                        description: `Taxa da movimenta├º├úo: ${sourceAccount.name} -> ${destAccount.name}`,\r\n                        parent_transaction_id: mainTx.id,\r\n                    },\r\n                });\r\n            }\r\n\r\n            toast.success(\"Movimenta├º├úo registrada.\");\r\n            resetMov();\r\n            if (onSuccess) onSuccess();\r\n            return true;\r\n        } catch (error) {\r\n            toast.error(\"Falha ao registrar movimenta├º├úo.\");\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const handleAjusteSubmit = async (): Promise<boolean> => {\r\n        const result = ajusteSchema.safeParse(state.ajuste);\r\n        if (!result.success) {\r\n            toast.error(result.error.errors[0].message);\r\n            return false;\r\n        }\r\n\r\n        const account = accountsMap.get(state.ajuste.accountId);\r\n        if (!account || !associacaoEntity) {\r\n            toast.error(\"Conta ou entidade n├úo encontrada.\");\r\n            return false;\r\n        }\r\n\r\n        let module: Database[\"public\"][\"Enums\"][\"transaction_module\"] = \"especie_ajuste\";\r\n        if (account.name === ACCOUNT_NAMES.ESPECIE) module = \"especie_ajuste\";\r\n        else if (account.name === ACCOUNT_NAMES.COFRE) module = \"cofre_ajuste\";\r\n        else if (account.name === ACCOUNT_NAMES.CONTA_DIGITAL) module = \"conta_digital_ajuste\";\r\n        else if (account.name === ACCOUNT_NAMES.PIX) module = \"pix_ajuste\" as any;\r\n\r\n        const direction = state.ajuste.valor > 0 ? \"in\" : \"out\";\r\n        const absAmount = Math.abs(state.ajuste.valor);\r\n\r\n        try {\r\n            await createTransaction.mutateAsync({\r\n                transaction: {\r\n                    transaction_date: state.ajuste.date,\r\n                    module,\r\n                    entity_id: associacaoEntity.id,\r\n                    source_account_id: direction === \"out\" ? account.id : null,\r\n                    destination_account_id: direction === \"in\" ? account.id : null,\r\n                    amount: absAmount,\r\n                    direction,\r\n                    description: `Ajuste: ${state.ajuste.motivo}`,\r\n                    notes: state.ajuste.obs || null,\r\n                },\r\n            });\r\n\r\n            toast.success(`Ajuste de ${account.name} registrado.`);\r\n            resetAjuste();\r\n            if (onSuccess) onSuccess();\r\n            return true;\r\n        } catch (error) {\r\n            toast.error(\"Falha ao registrar ajuste.\");\r\n            return false;\r\n        }\r\n    };\r\n\r\n    return {\r\n        state,\r\n        setters,\r\n        handlers: {\r\n            handleMensalidadeSubmit,\r\n            handleMovimentarSubmit,\r\n            handleAjusteSubmit,\r\n            resetMensalidade,\r\n            resetGasto,\r\n            resetMov,\r\n            resetAjuste\r\n        },\r\n        isLoading: createTransaction.isPending,\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-dashboard-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-entity-transactions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":6,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":9,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[415,418],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[415,418],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Transaction, TransactionWithCreator } from \"@/types\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useDemoData } from \"@/demo/useDemoData\";\r\nimport { useTransactionMetadata } from \"./use-transaction-metadata\";\r\n\r\n// Helper to map transaction data\r\nconst mapTransaction = (\r\n  t: any,\r\n  profileMap: Map<string, string>,\r\n  accountMap: Map<string, string>,\r\n  merchantMap: Map<string, string>\r\n): TransactionWithCreator => ({\r\n  ...t,\r\n  creator_name: profileMap.get(t.created_by) || null,\r\n  source_account_name: t.source_account_id ? accountMap.get(t.source_account_id) || null : null,\r\n  destination_account_name: t.destination_account_id ? accountMap.get(t.destination_account_id) || null : null,\r\n  merchant_name: t.merchant_id ? merchantMap.get(t.merchant_id) || null : null,\r\n});\r\n\r\nexport function useAssociacaoTransactions() {\r\n  const { isDemo } = useAuth();\r\n  const { getTransactions, getAccounts, getMerchants } = useDemoData();\r\n  const { data: meta } = useTransactionMetadata();\r\n\r\n  const query = useQuery({\r\n    queryKey: [\"transactions\", \"associacao\"],\r\n    queryFn: async () => {\r\n      const { data: entity } = await supabase.from(\"entities\").select(\"id\").eq(\"type\", \"associacao\").single();\r\n      if (!entity) return [];\r\n\r\n      const { data: transactions, error } = await supabase\r\n        .from(\"transactions\")\r\n        .select(\"*\")\r\n        .eq(\"entity_id\", entity.id)\r\n        .eq(\"status\", \"posted\")\r\n        .order(\"transaction_date\", { ascending: false })\r\n        .order(\"created_at\", { ascending: false })\r\n        .limit(100);\r\n\r\n      if (error) throw error;\r\n\r\n      return (transactions || []).map(t => mapTransaction(\r\n        t,\r\n        meta?.profileNameMap || new Map(),\r\n        meta?.accountNameMap || new Map(),\r\n        meta?.merchantNameMap || new Map()\r\n      ));\r\n    },\r\n    enabled: !isDemo && !!meta,\r\n  });\r\n\r\n  if (isDemo) {\r\n    const demoAccounts = getAccounts();\r\n    const demoTransactions = getTransactions();\r\n    const demoMerchants = getMerchants();\r\n\r\n    const associationAccounts = demoAccounts.filter(a => a.type === 'association').map(a => a.id);\r\n    const filtered = demoTransactions.filter(t =>\r\n      associationAccounts.includes(t.account_id) ||\r\n      (t.source_account_id && associationAccounts.includes(t.source_account_id))\r\n    ).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n\r\n    const mapped = filtered.map(t => {\r\n      const source = demoAccounts.find(a => a.id === t.source_account_id);\r\n      const dest = demoAccounts.find(a => a.id === t.destination_account_id);\r\n      const merchant = demoMerchants.find(m => m.id === t.merchant_id);\r\n\r\n      return {\r\n        ...t,\r\n        direction: t.type === 'income' ? 'in' : 'out',\r\n        source_account_name: source?.name || null,\r\n        destination_account_name: dest?.name || demoAccounts.find(a => a.id === t.account_id)?.name || null,\r\n        merchant_name: merchant?.name || null,\r\n        creator_name: t.created_by_name || 'Usu├írio Demo',\r\n        created_by: 'demo-user',\r\n        status: 'posted',\r\n        source_account_id: t.source_account_id || null, // Ensure compatibility\r\n        destination_account_id: t.destination_account_id || null,\r\n        merchant_id: t.merchant_id || null\r\n      } as unknown as TransactionWithCreator;\r\n    });\r\n\r\n    return { ...query, data: mapped, isLoading: false, isError: false, error: null };\r\n  }\r\n\r\n  return query;\r\n}\r\n\r\nexport function useRecursosTransactions() {\r\n  const { isDemo } = useAuth();\r\n  const { getTransactions, getAccounts } = useDemoData();\r\n  const { data: meta } = useTransactionMetadata();\r\n\r\n  const query = useQuery({\r\n    queryKey: [\"transactions\", \"recursos\"],\r\n    queryFn: async () => {\r\n      const { data: transactions, error } = await supabase\r\n        .from(\"transactions\")\r\n        .select(\"*\")\r\n        .eq(\"module\", \"pix_direto_uecx\")\r\n        .eq(\"status\", \"posted\")\r\n        .order(\"transaction_date\", { ascending: false })\r\n        .order(\"created_at\", { ascending: false })\r\n        .limit(100);\r\n\r\n      if (error) throw error;\r\n\r\n      // Additional map for entities which is specific to this hook\r\n      const { data: entities } = await supabase.from(\"entities\").select(\"id, name, type, cnpj\");\r\n      const entityMap = new Map(entities?.map((e) => [e.id, e]) || []);\r\n\r\n      return (transactions || []).map((t): TransactionWithCreator & { entity_type: string | null, entity_cnpj: string | null } => {\r\n        // Reuse meta maps but we need entity logic here\r\n        const entityId = meta?.accountEntityMap.get(t.source_account_id || '') || null;\r\n        const entityInfo = entityId ? entityMap.get(entityId) : null;\r\n\r\n        return {\r\n          ...mapTransaction(t, meta?.profileNameMap || new Map(), meta?.accountNameMap || new Map(), meta?.merchantNameMap || new Map()),\r\n          entity_type: entityInfo?.type || null,\r\n          entity_cnpj: entityInfo?.cnpj || null,\r\n        };\r\n      });\r\n    },\r\n    enabled: !isDemo && !!meta,\r\n  });\r\n\r\n  if (isDemo) {\r\n    const demoTransactions = getTransactions();\r\n    const demoAccounts = getAccounts();\r\n\r\n    const mapped = demoTransactions.filter(t => t.module === 'pix_direto_uecx')\r\n      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n      .map(t => {\r\n        const fallbackAccount = demoAccounts.find(a => a.id === t.account_id);\r\n        const source = demoAccounts.find(a => a.id === t.source_account_id);\r\n        return {\r\n          ...t,\r\n          direction: t.type === 'income' ? 'in' : 'out',\r\n          source_account_name: source?.name || fallbackAccount?.name || null,\r\n          creator_name: t.created_by_name || 'Usu├írio Demo',\r\n          created_by: 'demo-user',\r\n          status: 'posted',\r\n          destination_account_name: null, merchant_name: null,\r\n          entity_type: fallbackAccount?.entity_id === 'ent_ue' ? 'ue' : 'cx',\r\n          entity_cnpj: '00.000.000/0001-99',\r\n          source_account_id: t.source_account_id || t.account_id || null,\r\n          destination_account_id: null, merchant_id: null\r\n        } as unknown as TransactionWithCreator & { entity_type: string | null, entity_cnpj: string | null };\r\n      });\r\n\r\n    return { ...query, data: mapped, isLoading: false, isError: false, error: null };\r\n  }\r\n\r\n  return query;\r\n}\r\n\r\nexport function useSaldosTransactions() {\r\n  const { isDemo } = useAuth();\r\n  const { getTransactions, getAccounts, getMerchants } = useDemoData();\r\n  const { data: meta } = useTransactionMetadata();\r\n\r\n  const query = useQuery({\r\n    queryKey: [\"transactions\", \"saldos\"],\r\n    queryFn: async () => {\r\n      const { data: transactions, error } = await supabase\r\n        .from(\"transactions\")\r\n        .select(\"*\")\r\n        .in(\"module\", [\"aporte_saldo\", \"consumo_saldo\"])\r\n        .eq(\"status\", \"posted\")\r\n        .order(\"transaction_date\", { ascending: false })\r\n        .order(\"created_at\", { ascending: false })\r\n        .limit(100);\r\n\r\n      if (error) throw error;\r\n\r\n      return (transactions || []).map(t => mapTransaction(\r\n        t, meta?.profileNameMap || new Map(), meta?.accountNameMap || new Map(), meta?.merchantNameMap || new Map()\r\n      ));\r\n    },\r\n    enabled: !isDemo && !!meta,\r\n  });\r\n\r\n  if (isDemo) {\r\n    const demoTransactions = getTransactions();\r\n    const demoAccounts = getAccounts();\r\n    const demoMerchants = getMerchants();\r\n\r\n    const mapped = demoTransactions.filter(t => ['aporte_saldo', 'consumo_saldo'].includes(t.module))\r\n      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n      .map(t => {\r\n        const merchant = demoMerchants.find(m => m.id === t.merchant_id || m.id === t.account_id);\r\n        const source = demoAccounts.find(a => a.id === t.source_account_id);\r\n        const dest = demoAccounts.find(a => a.id === t.destination_account_id);\r\n\r\n        return {\r\n          ...t,\r\n          direction: t.type === 'income' ? 'in' : 'out',\r\n          creator_name: t.created_by_name || 'Usu├írio Demo',\r\n          merchant_name: merchant?.name || null,\r\n          source_account_name: source?.name || null,\r\n          destination_account_name: dest?.name || null,\r\n          created_by: 'demo-user', status: 'posted',\r\n          source_account_id: t.source_account_id || null,\r\n          destination_account_id: t.destination_account_id || null,\r\n          merchant_id: t.merchant_id || null\r\n        } as unknown as TransactionWithCreator;\r\n      });\r\n\r\n    return { ...query, data: mapped, isLoading: false, isError: false, error: null };\r\n  }\r\n\r\n  return query;\r\n}\r\n\r\nexport function useAllTransactionsWithCreator(startDate?: string, endDate?: string) {\r\n  const { isDemo } = useAuth();\r\n  const { getTransactions, getAccounts, getMerchants } = useDemoData();\r\n  const { data: meta } = useTransactionMetadata();\r\n\r\n  const query = useQuery({\r\n    queryKey: [\"transactions\", \"all-with-creator\", startDate, endDate],\r\n    queryFn: async () => {\r\n      let queryFn = supabase\r\n        .from(\"transactions\")\r\n        .select(\"*\")\r\n        .eq(\"status\", \"posted\")\r\n        .order(\"transaction_date\", { ascending: false })\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n      if (startDate) queryFn = queryFn.gte(\"transaction_date\", startDate);\r\n      if (endDate) queryFn = queryFn.lte(\"transaction_date\", endDate);\r\n\r\n      const { data: transactions, error } = await queryFn;\r\n      if (error) throw error;\r\n\r\n      const { data: entities } = await supabase.from(\"entities\").select(\"id, name, type\");\r\n      const entityMap = new Map(entities?.map((e) => [e.id, e]) || []);\r\n\r\n      return (transactions || []).map((t): TransactionWithCreator & { entity_name: string | null } => ({\r\n        ...mapTransaction(t, meta?.profileNameMap || new Map(), meta?.accountNameMap || new Map(), meta?.merchantNameMap || new Map()),\r\n        entity_name: t.entity_id ? entityMap.get(t.entity_id)?.name || null : null,\r\n      }));\r\n    },\r\n    enabled: !isDemo && !!meta,\r\n  });\r\n\r\n  if (isDemo) {\r\n    if (!startDate || !endDate) return { ...query, data: [], isLoading: false };\r\n    const transactions = getTransactions();\r\n    const accounts = getAccounts();\r\n    const merchants = getMerchants();\r\n\r\n    const start = new Date(startDate);\r\n    const end = new Date(endDate);\r\n    end.setHours(23, 59, 59, 999);\r\n\r\n    const mapped = transactions\r\n      .filter(t => { const d = new Date(t.date); return d >= start && d <= end; })\r\n      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n      .map(t => {\r\n        const source = accounts.find(a => a.id === t.source_account_id);\r\n        const dest = accounts.find(a => a.id === t.destination_account_id);\r\n        const merchant = merchants.find(m => m.id === t.merchant_id);\r\n        const fallbackAccount = accounts.find(a => a.id === t.account_id);\r\n\r\n        return {\r\n          ...t,\r\n          direction: t.type === 'income' ? 'in' : 'out',\r\n          creator_name: t.created_by_name || 'Usu├írio Demo',\r\n          created_by: 'demo-user', status: 'posted',\r\n          source_account_name: source?.name || null,\r\n          destination_account_name: dest?.name || fallbackAccount?.name || null,\r\n          merchant_name: merchant?.name || null,\r\n          entity_name: 'Associa├º├úo CMCB-XI', entity_type: 'associacao', entity_cnpj: '00.000.000/0001-00',\r\n          source_account_id: t.source_account_id || null, destination_account_id: t.destination_account_id || null, merchant_id: t.merchant_id || null, origin_fund: null, entity_id: null\r\n        } as unknown as TransactionWithCreator & { entity_name: string | null };\r\n      });\r\n    return { ...query, data: mapped, isLoading: false, isError: false, error: null };\r\n  }\r\n  return query;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-expense-shortcuts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-merchants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-pix-batch.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":37,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":37,"endColumn":42,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[932,961],"text":"// @ts-expect-error - RPC not typed"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1124,1127],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1124,1127],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":67,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":67,"endColumn":42,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2110,2139],"text":"// @ts-expect-error - RPC not typed"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\n\r\nexport interface PixFeeItem {\r\n    amount: number;\r\n    description: string;\r\n    occurred_at?: string;\r\n}\r\n\r\nexport interface PixFeeBatchPayload {\r\n    items: PixFeeItem[];\r\n    reference?: string;\r\n    occurred_at?: string;\r\n}\r\n\r\nexport interface TransactionItem {\r\n    id: string;\r\n    amount: number;\r\n    description: string | null;\r\n    occurred_at: string | null;\r\n    created_at: string;\r\n}\r\n\r\nexport function useCreatePixFeeBatch() {\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async ({\r\n            entityId,\r\n            payload,\r\n        }: {\r\n            entityId: string;\r\n            payload: PixFeeBatchPayload;\r\n        }) => {\r\n            // @ts-ignore - RPC not typed\r\n            const { data, error } = await supabase.rpc(\"process_pix_fee_batch\", {\r\n                p_entity_id: entityId,\r\n                p_payload: payload as any,\r\n            });\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries({ queryKey: [\"dashboard-data\"] });\r\n            queryClient.invalidateQueries({ queryKey: [\"accounts\"] });\r\n            queryClient.invalidateQueries({ queryKey: [\"transactions\"] });\r\n            queryClient.invalidateQueries({ queryKey: [\"all-transactions\"] });\r\n            toast.success(\"Taxas PIX lan├ºadas com sucesso!\");\r\n        },\r\n        onError: (error: Error) => {\r\n            console.error(\"Pix Batch error:\", error);\r\n            toast.error(error.message || \"Erro ao lan├ºar taxas.\");\r\n        },\r\n    });\r\n}\r\n\r\nexport function useTransactionItems(parentTransactionId: string | null) {\r\n    const { user } = useAuth();\r\n\r\n    return useQuery({\r\n        queryKey: [\"transaction-items\", parentTransactionId],\r\n        queryFn: async () => {\r\n            if (!parentTransactionId) return [];\r\n            // @ts-ignore - RPC not typed\r\n            const { data, error } = await supabase.rpc(\"get_transaction_items\", {\r\n                p_parent_transaction_id: parentTransactionId,\r\n            });\r\n\r\n            if (error) throw error;\r\n            return data as TransactionItem[];\r\n        },\r\n        enabled: !!parentTransactionId && !!user,\r\n    });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-reports.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-saldos-actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-transaction-metadata.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\hooks\\use-transactions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":59,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2326,2329],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2326,2329],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":200,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9141,9144],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9141,9144],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { toast } from \"sonner\";\r\nimport { Account, DashboardData, Merchant } from \"@/types\";\r\nimport { ACCOUNT_NAMES } from \"@/lib/constants\";\r\nimport { Database } from \"@/integrations/supabase/types\";\r\nimport { useDemoData } from \"@/demo/useDemoData\";\r\n\r\ntype TransactionModule = Database[\"public\"][\"Enums\"][\"transaction_module\"];\r\n\r\ninterface CreateTransactionData {\r\n  transaction_date: string;\r\n  module: TransactionModule;\r\n  entity_id?: string | null;\r\n  source_account_id?: string | null;\r\n  destination_account_id?: string | null;\r\n  merchant_id?: string | null;\r\n  amount: number;\r\n  direction: \"in\" | \"out\" | \"transfer\";\r\n  payment_method?: \"cash\" | \"pix\" | null;\r\n  origin_fund?: \"UE\" | \"CX\" | null;\r\n  capital_custeio?: \"capital\" | \"custeio\" | null;\r\n  shift?: \"matutino\" | \"vespertino\" | null;\r\n  description?: string | null;\r\n  notes?: string | null;\r\n  parent_transaction_id?: string | null;\r\n}\r\n\r\nexport function useCreateTransaction() {\r\n  const { user, isDemo } = useAuth();\r\n  const queryClient = useQueryClient();\r\n  const { addTransaction } = useDemoData();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({\r\n      transaction,\r\n    }: {\r\n      transaction: CreateTransactionData;\r\n    }) => {\r\n      if (!user) throw new Error(\"Usu├írio n├úo autenticado\");\r\n\r\n      if (isDemo) {\r\n        const mockTx = {\r\n          id: crypto.randomUUID(),\r\n          date: transaction.transaction_date,\r\n          description: transaction.description || 'Lan├ºamento Demo',\r\n          amount: transaction.amount,\r\n          type: transaction.direction === 'in' ? 'income' : 'expense',\r\n          category: transaction.module,\r\n          account_id: transaction.destination_account_id || transaction.source_account_id || '',\r\n          merchant_id: transaction.merchant_id || undefined,\r\n          source_account_id: transaction.source_account_id || undefined,\r\n          destination_account_id: transaction.destination_account_id || undefined,\r\n          module: transaction.module\r\n        };\r\n        // @ts-expect-error - mockTx is compatible for demo purposes\r\n        addTransaction(mockTx);\r\n        return mockTx as Record<string, any>;\r\n      }\r\n\r\n      const { data: txn, error: txnError } = await supabase\r\n        .rpc(\"process_transaction\", {\r\n          p_tx: {\r\n            transaction_date: transaction.transaction_date,\r\n            module: transaction.module,\r\n            entity_id: transaction.entity_id || null,\r\n            source_account_id: transaction.source_account_id || null,\r\n            destination_account_id: transaction.destination_account_id || null,\r\n            merchant_id: transaction.merchant_id || null,\r\n            amount: transaction.amount,\r\n            direction: transaction.direction,\r\n            payment_method: transaction.payment_method || null,\r\n            origin_fund: transaction.origin_fund || null,\r\n            capital_custeio: transaction.capital_custeio || null,\r\n            shift: transaction.shift || null,\r\n            description: transaction.description || null,\r\n            notes: transaction.notes || null,\r\n            parent_transaction_id: transaction.parent_transaction_id || null,\r\n          }\r\n        })\r\n        .single();\r\n\r\n      if (txnError) throw txnError;\r\n      return txn;\r\n    },\r\n    onMutate: async ({ transaction }) => {\r\n      await queryClient.cancelQueries({ queryKey: [\"dashboard-data\"] });\r\n      await queryClient.cancelQueries({ queryKey: [\"accounts\"] });\r\n      await queryClient.cancelQueries({ queryKey: [\"merchants\"] });\r\n\r\n      const previousDashboard = queryClient.getQueryData<DashboardData>([\"dashboard-data\"]);\r\n      const previousAccounts = queryClient.getQueryData<Account[]>([\"accounts\"]);\r\n      const previousMerchants = queryClient.getQueryData<Merchant[]>([\"merchants\"]);\r\n\r\n      if (previousDashboard) {\r\n        const newDashboard = { ...previousDashboard };\r\n        const amount = Number(transaction.amount);\r\n\r\n        // Generic balance adjustment based on direction and account name\r\n        if (transaction.direction === \"in\" || transaction.direction === \"out\") {\r\n          const isAdd = transaction.direction === \"in\";\r\n          const accId = isAdd ? transaction.destination_account_id : transaction.source_account_id;\r\n\r\n          if (accId && previousAccounts) {\r\n            const acc = previousAccounts.find(a => a.id === accId);\r\n            if (acc) {\r\n              if (acc.name === ACCOUNT_NAMES.ESPECIE) newDashboard.especieBalance += (isAdd ? amount : -amount);\r\n              else if (acc.name === ACCOUNT_NAMES.PIX) newDashboard.pixBalance += (isAdd ? amount : -amount);\r\n              else if (acc.name === ACCOUNT_NAMES.COFRE) newDashboard.cofreBalance += (isAdd ? amount : -amount);\r\n              else if (acc.name === ACCOUNT_NAMES.CONTA_DIGITAL) newDashboard.contaDigitalBalance += (isAdd ? amount : -amount);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (transaction.direction === \"transfer\" && transaction.source_account_id && transaction.destination_account_id) {\r\n          const srcAcc = previousAccounts?.find(a => a.id === transaction.source_account_id);\r\n          const dstAcc = previousAccounts?.find(a => a.id === transaction.destination_account_id);\r\n\r\n          if (srcAcc) {\r\n            if (srcAcc.name === ACCOUNT_NAMES.ESPECIE) newDashboard.especieBalance -= amount;\r\n            else if (srcAcc.name === ACCOUNT_NAMES.PIX) newDashboard.pixBalance -= amount;\r\n            else if (srcAcc.name === ACCOUNT_NAMES.COFRE) newDashboard.cofreBalance -= amount;\r\n            else if (srcAcc.name === ACCOUNT_NAMES.CONTA_DIGITAL) newDashboard.contaDigitalBalance -= amount;\r\n          }\r\n          if (dstAcc) {\r\n            if (dstAcc.name === ACCOUNT_NAMES.ESPECIE) newDashboard.especieBalance += amount;\r\n            else if (dstAcc.name === ACCOUNT_NAMES.PIX) newDashboard.pixBalance += amount;\r\n            else if (dstAcc.name === ACCOUNT_NAMES.COFRE) newDashboard.cofreBalance += amount;\r\n            else if (dstAcc.name === ACCOUNT_NAMES.CONTA_DIGITAL) newDashboard.contaDigitalBalance += amount;\r\n          }\r\n        }\r\n\r\n        if (transaction.merchant_id) {\r\n          const mIdx = newDashboard.merchantBalances.findIndex(m => m.id === transaction.merchant_id);\r\n          if (mIdx !== -1) {\r\n            const m = { ...newDashboard.merchantBalances[mIdx] };\r\n            if (transaction.module === \"aporte_saldo\" || transaction.module === \"aporte_estabelecimento_recurso\") {\r\n              m.balance += amount;\r\n            } else if (transaction.module === \"consumo_saldo\") {\r\n              m.balance -= amount;\r\n            }\r\n            newDashboard.merchantBalances[mIdx] = m;\r\n          }\r\n        }\r\n\r\n        queryClient.setQueryData([\"dashboard-data\"], newDashboard);\r\n      }\r\n\r\n      if (previousAccounts) {\r\n        const newAccounts = previousAccounts.map(acc => {\r\n          const amount = Number(transaction.amount);\r\n          let newBalance = acc.balance;\r\n\r\n          if (transaction.direction === \"transfer\") {\r\n            if (acc.id === transaction.source_account_id) newBalance -= amount;\r\n            if (acc.id === transaction.destination_account_id) newBalance += amount;\r\n          } else if (transaction.direction === \"in\" && acc.id === transaction.destination_account_id) {\r\n            newBalance += amount;\r\n          } else if (transaction.direction === \"out\" && acc.id === transaction.source_account_id) {\r\n            newBalance -= amount;\r\n          }\r\n\r\n          return { ...acc, balance: newBalance };\r\n        });\r\n        queryClient.setQueryData([\"accounts\"], newAccounts);\r\n      }\r\n\r\n      return { previousDashboard, previousAccounts, previousMerchants };\r\n    },\r\n    onError: (error: Error, __, context) => {\r\n      console.error(\"Transaction error:\", error);\r\n      if (context) {\r\n        queryClient.setQueryData([\"dashboard-data\"], context.previousDashboard);\r\n        queryClient.setQueryData([\"accounts\"], context.previousAccounts);\r\n        queryClient.setQueryData([\"merchants\"], context.previousMerchants);\r\n      }\r\n      toast.error(error.message || \"N├úo foi poss├¡vel registrar a opera├º├úo.\");\r\n    },\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"dashboard-data\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"accounts\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"merchants\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"transactions\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"entities-with-accounts\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"all-transactions\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"saldos-transactions\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"recursos-transactions\"] });\r\n    },\r\n  });\r\n}\r\n\r\nexport function useCreateResourceTransaction() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({\r\n      transaction,\r\n    }: {\r\n      transaction: any;\r\n    }) => {\r\n      const { data: txn, error: txnError } = await supabase\r\n        .rpc(\"process_resource_transaction\", {\r\n          p_tx: transaction\r\n        })\r\n        .single();\r\n\r\n      if (txnError) throw txnError;\r\n      return txn;\r\n    },\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"dashboard-data\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"accounts\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"merchants\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"transactions\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"entities-with-accounts\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"all-transactions\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"saldos-transactions\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"recursos-transactions\"] });\r\n    },\r\n    onError: (error: Error) => {\r\n      console.error(\"Resource Transaction error:\", error);\r\n      toast.error(error.message || \"N├úo foi poss├¡vel registrar a opera├º├úo de recurso.\");\r\n    },\r\n  });\r\n}\r\n\r\nexport function useVoidTransaction() {\r\n  const { user } = useAuth();\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async ({\r\n      transactionId,\r\n      reason,\r\n    }: {\r\n      transactionId: string;\r\n      reason: string;\r\n    }) => {\r\n      const { data, error } = await supabase.rpc(\"void_transaction\", {\r\n        p_id: transactionId,\r\n        p_reason: reason,\r\n      });\r\n\r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n    onError: (error: Error) => {\r\n      console.error(\"Void error:\", error);\r\n      toast.error(error.message || \"N├úo foi poss├¡vel anular a transa├º├úo.\");\r\n    },\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"dashboard-data\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"accounts\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"merchants\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"transactions\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"entities-with-accounts\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"all-transactions\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"saldos-transactions\"] });\r\n      queryClient.invalidateQueries({ queryKey: [\"recursos-transactions\"] });\r\n      toast.success(\"A transa├º├úo foi anulada com sucesso.\");\r\n    },\r\n  });\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\integrations\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\integrations\\supabase\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\lib\\account-display.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\lib\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\lib\\currency.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\lib\\date-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\lib\\export-utils.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":84,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2773,2776],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2773,2776],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\lib\\schemas.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\AssociacaoPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\AuthPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\DashboardPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\Index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\LogPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\NotFound.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\PerfilPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\RecursosPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\RelatoriosPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\ResetPasswordPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\SaldosPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\pages\\UsuariosPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\test\\account-display.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\test\\currency.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\test\\date-utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\test\\example.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\test\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\test\\sorting.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\Projetos\\CMCB-XI\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
